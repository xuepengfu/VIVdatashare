%总质量矩阵形成
m=massmatrix(rho,area,l,Ip);
M=zeros(nnode*ndof);
for i=1:nel   %以单元数作为循环计数
    t=coordinatetrans();
    m=massmatrix(rho,area,l,Ip);
    m1=t'*m*t;
    M(6*i-5:6*i+6,6*i-5:6*i+6)=M(6*i-5:6*i+6,6*i-5:6*i+6)+m1(1:12,1:12);
%     M(3i-2,3i-2)=M(3i-2,3i-2)+m(1,1);
%     M(3i-2,3i-1)=M(3i-2,3i-1)+m(1,2);
%     M(3i-2,3i)=M(3i-2,3i)+m(1,3);
%     M(3i-2,3i+1)=M(3i-2,3i+1)+m(1,4);
%     M(3i-2,3i+2)=M(3i-2,3i+2)+m(1,5);
%     M(3i-2,3i+3)=M(3i-2,3i+3)+m(1,6);
%     M(3i-1,3i-2)=M(3i-1,3i-2)+m(2,1);
%     M(3i-1,3i-1)=M(3i-1,3i-1)+m(2,2);
%     M(3i-1,3i)=M(3i-1,3i)+m(2,3);
%     M(3i-1,3i+1)=M(3i-1,3i+1)+m(2,4);
%     M(3i-1,3i+2)=M(3i-1,3i+2)+m(2,5);
%     M(3i-1,3i+3)=M(3i-1,3i+3)+m(2,6);
%     M(3i,3i-2)=M(3i,3i-2)+m(3,1);
%     M(3i,3i-1)=M(3i,3i-1)+m(3,2);
%     M(3i,3i)=M(3i,3i)+m(3,3);
%     M(3i,3i+1)=M(3i,2i+1)+m(3,4);
%     M(3i,3i+2)=M(3i,2i+2)+m(3,5);
%     M(3i,3i+3)=M(3i,2i+3)+m(3,6);
%     M(3i+1,3i-2)=M(3i+1,3i-2)+m(4,1);
%     M(3i+1,3i-1)=M(3i+1,3i-1)+m(4,2);
%     M(3i+1,3i)=M(3i+1,3i)+m(4,3);
%     M(3i+1,3i+1)=M(3i+1,3i+1)+m(4,4);
%     M(3i+1,3i+2)=M(3i+1,3i+2)+m(4,5);
%     M(3i+1,3i+3)=M(3i+1,3i+3)+m(4,6);
%     M(3i+2,3i-2)=M(3i+2,3i-2)+m(5,1);
%     M(3i+2,3i-1)=M(3i+2,3i-1)+m(5,2);
%     M(3i+2,3i)=M(3i+2,3i)+m(5,3);
%     M(3i+2,3i+1)=M(3i+2,3i+1)+m(5,4);
%     M(3i+2,3i+2)=M(3i+2,3i+2)+m(5,5);
%     M(3i+2,3i+3)=M(3i+2,3i+3)+m(5,6);
%     M(3i+3,3i-2)=M(3i+3,3i-2)+m(6,1);
%     M(3i+3,3i-1)=M(3i+3,3i-1)+m(6,2);
%     M(3i+3,3i)=M(3i+3,3i)+m(6,3);
%     M(3i+3,3i+1)=M(3i+3,3i+1)+m(6,4);
%     M(3i+3,3i+2)=M(3i+3,3i+2)+m(6,5);
%     M(3i+3,3i+3)=M(3i+3,3i+3)+m(6,6);
end